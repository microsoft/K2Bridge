# Configuration

|                                                                                                                            | Helm Setting                                 |                Default value                 | Optional | Note                                                                                                                 |
|:--------------------------------------------------------------------------------------------------------------------------:|----------------------------------------------|:--------------------------------------------:|:--------:|----------------------------------------------------------------------------------------------------------------------|
|                                                       Replica Count                                                        | replicaCount                                 |                      2                       |    V     |                                                                                                                      |
|                                                 Private container registry                                                 | privateRegistry                              |                     NONE                     |    V     | Set the K8S secret to a private ACR                                                                                  |
|                                                         Repository                                                         | image.repository                             | mcr.microsoft.com/azuredataexplorer/k2bridge |    V     | ACR and image name                                                                                                   |
|                                                         Image tag                                                          | image.tag                                    |                 7.16_latest                  |    V     |                                                                                                                      |
|                                                     Image pull policy                                                      | image.pullPolicy                             |                    Always                    |    V     |                                                                                                                      |
|                                                    K2 listener address                                                     | settings.bridgeListenerAddress               |             http://k2bridge:80/              |    V     | Leave as default for most use cases                                                                                  |
|                                                Internal ES instance address                                                | settings.metadataElasticAddress              |        http://k2bridgees-master:9200         |    V     | Leave as default for most use cases                                                                                  |
|                                                Show generated KustoQL query                                                | settings.outputBackendQuery                  |                     true                     |    V     | The generated KustoQL will be appended to the HTTP response from K2                                                  |
|                                                      ADX cluster URL                                                       | settings.adxClusterUrl                       |                     NONE                     |    X     |                                                                                                                      |
|                                                       ADX default DB                                                       | settings.adxDefaultDatabaseName              |                     NONE                     |    X     |                                                                                                                      |
|                                                      Managed Identity                                                      | settings.useManagedIdentity                  |                    false                     |    V*    | 'Read' permissions set is all that K2 requires                                                                       |
|                                                   AAD client ID for ADX                                                    | settings.aadClientId                         |                     NONE                     |    X     | 'Read' permissions set is all that K2 requires                                                                       |
|                                                     AAD client secret                                                      | settings.aadClientSecret                     |                     NONE                     |    V*    |                                                                                                                      |
|                                                       AAD tenant ID                                                        | settings.aadTenantId                         |                     NONE                     |    X     |                                                                                                                      |
|                                          ApplicationInsights instrumentation key                                           | settings.instrumentationKey                  |                     NONE                     |    V     | won't work without setting collectTelemetry to 'true'                                                                |
|                                      Toggle telemetry sending to ApplicationInsights                                       | settings.collectTelemetry                    |                    false                     |    V     | when set to 'true' the instrumentation key must be provided                                                          |
|                                             Toggle query related data logging                                              | settings.enableQueryLogging                  |                     true                     |    X     |                                                                                                                      |
|                     Maximum amount of samples from the table to aggregate to generate dynamic columns                      | settings.maxDynamicSamples                   |                     NONE                     |    V     |                                                                                              |
| Maximum amount of time, in hours, since the ingestion of the samples from the table to aggregate to generate dynamic columns | settings.maxDynamicSamplesIngestionTimeHours |                     NONE                     |    V     |                                                                                              |

V* - Either clientId + Secret OR clientId + useManagedIdentity must be set.